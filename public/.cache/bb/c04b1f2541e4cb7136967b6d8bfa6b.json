{"id":"../node_modules/react-stockcharts/lib/series/KagiSeries.js","dependencies":[{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/series/KagiSeries.js.map","includedInParent":true,"mtime":1536032206000},{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/package.json","includedInParent":true,"mtime":1602365273866},{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/public/.babelrc","includedInParent":true,"mtime":1602365273866},{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/package.json","includedInParent":true,"mtime":1602365360568},{"name":"react","loc":{"line":9,"column":21},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/series/KagiSeries.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react/react.js"},{"name":"prop-types","loc":{"line":13,"column":25},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/series/KagiSeries.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/prop-types/index.js"},{"name":"d3-shape","loc":{"line":17,"column":23},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/series/KagiSeries.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/d3-shape/src/index.js"},{"name":"../GenericChartComponent","loc":{"line":19,"column":37},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/series/KagiSeries.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/GenericChartComponent.js"},{"name":"../GenericComponent","loc":{"line":23,"column":32},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/series/KagiSeries.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/GenericComponent.js"},{"name":"../utils","loc":{"line":25,"column":21},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/series/KagiSeries.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/utils/index.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _d3Shape = require(\"d3-shape\");\n\nvar _GenericChartComponent = require(\"../GenericChartComponent\");\n\nvar _GenericChartComponent2 = _interopRequireDefault(_GenericChartComponent);\n\nvar _GenericComponent = require(\"../GenericComponent\");\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar KagiSeries = function (_Component) {\n\t_inherits(KagiSeries, _Component);\n\n\tfunction KagiSeries(props) {\n\t\t_classCallCheck(this, KagiSeries);\n\n\t\tvar _this = _possibleConstructorReturn(this, (KagiSeries.__proto__ || Object.getPrototypeOf(KagiSeries)).call(this, props));\n\n\t\t_this.renderSVG = _this.renderSVG.bind(_this);\n\t\t_this.drawOnCanvas = _this.drawOnCanvas.bind(_this);\n\t\treturn _this;\n\t}\n\n\t_createClass(KagiSeries, [{\n\t\tkey: \"drawOnCanvas\",\n\t\tvalue: function drawOnCanvas(ctx, moreProps) {\n\t\t\tvar xAccessor = moreProps.xAccessor;\n\n\n\t\t\t_drawOnCanvas(ctx, this.props, moreProps, xAccessor);\n\t\t}\n\t}, {\n\t\tkey: \"render\",\n\t\tvalue: function render() {\n\t\t\treturn _react2.default.createElement(_GenericChartComponent2.default, {\n\t\t\t\tsvgDraw: this.renderSVG,\n\t\t\t\tcanvasToDraw: _GenericComponent.getAxisCanvas,\n\t\t\t\tcanvasDraw: this.drawOnCanvas,\n\t\t\t\tdrawOn: [\"pan\"]\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: \"renderSVG\",\n\t\tvalue: function renderSVG(moreProps) {\n\t\t\tvar xAccessor = moreProps.xAccessor;\n\t\t\tvar xScale = moreProps.xScale,\n\t\t\t    yScale = moreProps.chartConfig.yScale,\n\t\t\t    plotData = moreProps.plotData;\n\t\t\tvar _props = this.props,\n\t\t\t    className = _props.className,\n\t\t\t    stroke = _props.stroke,\n\t\t\t    fill = _props.fill,\n\t\t\t    strokeWidth = _props.strokeWidth;\n\n\n\t\t\tvar paths = helper(plotData, xAccessor).map(function (each, i) {\n\t\t\t\tvar dataSeries = (0, _d3Shape.line)().x(function (item) {\n\t\t\t\t\treturn xScale(item[0]);\n\t\t\t\t}).y(function (item) {\n\t\t\t\t\treturn yScale(item[1]);\n\t\t\t\t}).curve(_d3Shape.curveStepBefore);\n\n\t\t\t\tdataSeries(each.plot);\n\n\t\t\t\treturn _react2.default.createElement(\"path\", { key: i, d: dataSeries(each.plot), className: each.type,\n\t\t\t\t\tstroke: stroke[each.type], fill: fill[each.type], strokeWidth: strokeWidth });\n\t\t\t});\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t\"g\",\n\t\t\t\t{ className: className },\n\t\t\t\tpaths\n\t\t\t);\n\t\t}\n\t}]);\n\n\treturn KagiSeries;\n}(_react.Component);\n\nKagiSeries.propTypes = {\n\tclassName: _propTypes2.default.string,\n\tstroke: _propTypes2.default.object,\n\tfill: _propTypes2.default.object,\n\tstrokeWidth: _propTypes2.default.number.isRequired\n};\n\nKagiSeries.defaultProps = {\n\tclassName: \"react-stockcharts-kagi\",\n\tstrokeWidth: 2,\n\tstroke: {\n\t\tyang: \"#6BA583\",\n\t\tyin: \"#E60000\"\n\t},\n\tfill: {\n\t\tyang: \"none\",\n\t\tyin: \"none\"\n\t},\n\tcurrentValueStroke: \"#000000\"\n};\n\nfunction _drawOnCanvas(ctx, props, moreProps, xAccessor) {\n\tvar stroke = props.stroke,\n\t    strokeWidth = props.strokeWidth,\n\t    currentValueStroke = props.currentValueStroke;\n\tvar xScale = moreProps.xScale,\n\t    yScale = moreProps.chartConfig.yScale,\n\t    plotData = moreProps.plotData;\n\n\n\tvar paths = helper(plotData, xAccessor);\n\n\tvar begin = true;\n\n\tpaths.forEach(function (each) {\n\t\tctx.strokeStyle = stroke[each.type];\n\t\tctx.lineWidth = strokeWidth;\n\n\t\tctx.beginPath();\n\t\tvar prevX = void 0;\n\t\teach.plot.forEach(function (d) {\n\t\t\tvar _ref = [xScale(d[0]), yScale(d[1])],\n\t\t\t    x = _ref[0],\n\t\t\t    y = _ref[1];\n\n\t\t\tif (begin) {\n\t\t\t\tctx.moveTo(x, y);\n\t\t\t\tbegin = false;\n\t\t\t} else {\n\t\t\t\tif ((0, _utils.isDefined)(prevX)) {\n\t\t\t\t\tctx.lineTo(prevX, y);\n\t\t\t\t}\n\t\t\t\tctx.lineTo(x, y);\n\t\t\t}\n\t\t\tprevX = x;\n\t\t\t// console.log(d);\n\t\t});\n\t\tctx.stroke();\n\t});\n\tvar lastPlot = paths[paths.length - 1].plot;\n\tvar last = lastPlot[lastPlot.length - 1];\n\tctx.beginPath();\n\t// ctx.strokeStyle = \"black\";\n\tctx.lineWidth = 1;\n\n\tvar _ref2 = [xScale(last[0]), yScale(last[2]), yScale(last[3])],\n\t    x = _ref2[0],\n\t    y1 = _ref2[1],\n\t    y2 = _ref2[2];\n\t// console.log(last, x, y);\n\n\tctx.moveTo(x, y1);\n\tctx.lineTo(x + 10, y1);\n\tctx.stroke();\n\n\tctx.beginPath();\n\tctx.strokeStyle = currentValueStroke;\n\tctx.moveTo(x - 10, y2);\n\tctx.lineTo(x, y2);\n\tctx.stroke();\n}\n\nfunction helper(plotData, xAccessor) {\n\tvar kagiLine = [];\n\tvar kagi = {};\n\tvar d = plotData[0];\n\tvar idx = xAccessor(d);\n\n\tfor (var i = 0; i < plotData.length; i++) {\n\t\td = plotData[i];\n\n\t\tif ((0, _utils.isNotDefined)(d.close)) continue;\n\t\tif ((0, _utils.isNotDefined)(kagi.type)) kagi.type = d.startAs;\n\t\tif ((0, _utils.isNotDefined)(kagi.plot)) kagi.plot = [];\n\n\t\tidx = xAccessor(d);\n\t\tkagi.plot.push([idx, d.open]);\n\n\t\tif ((0, _utils.isDefined)(d.changeTo)) {\n\t\t\tkagi.plot.push([idx, d.changePoint]);\n\t\t\tkagi.added = true;\n\t\t\tkagiLine.push(kagi);\n\n\t\t\tkagi = {\n\t\t\t\ttype: d.changeTo,\n\t\t\t\tplot: [],\n\t\t\t\tadded: false\n\t\t\t};\n\t\t\tkagi.plot.push([idx, d.changePoint]);\n\t\t}\n\t}\n\n\tif (!kagi.added) {\n\t\tkagi.plot.push([idx, d.close, d.current, d.reverseAt]);\n\t\tkagiLine.push(kagi);\n\t}\n\n\t// console.log(d.reverseAt);\n\n\treturn kagiLine;\n}\n\nexports.default = KagiSeries;\n"},"sourceMaps":{"js":{"version":3,"sources":["../../../src/lib/series/KagiSeries.js"],"names":["KagiSeries","props","renderSVG","bind","drawOnCanvas","ctx","moreProps","xAccessor","xScale","yScale","chartConfig","plotData","className","stroke","fill","strokeWidth","paths","helper","map","each","i","dataSeries","x","item","y","curve","plot","type","propTypes","string","object","number","isRequired","defaultProps","yang","yin","currentValueStroke","begin","forEach","strokeStyle","lineWidth","beginPath","prevX","d","moveTo","lineTo","lastPlot","length","last","y1","y2","kagiLine","kagi","idx","close","startAs","push","open","changeTo","changePoint","added","current","reverseAt"],"mappings":"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","file":"KagiSeries.js","sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { line, curveStepBefore } from \"d3-shape\";\n\nimport GenericChartComponent from \"../GenericChartComponent\";\nimport { getAxisCanvas } from \"../GenericComponent\";\nimport { isDefined, isNotDefined } from \"../utils\";\n\nclass KagiSeries extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst { xAccessor } = moreProps;\n\n\t\tdrawOnCanvas(ctx, this.props, moreProps, xAccessor);\n\t}\n\trender() {\n\t\treturn <GenericChartComponent\n\t\t\tsvgDraw={this.renderSVG}\n\t\t\tcanvasToDraw={getAxisCanvas}\n\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\tdrawOn={[\"pan\"]}\n\t\t/>;\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { xAccessor } = moreProps;\n\t\tconst { xScale, chartConfig: { yScale }, plotData } = moreProps;\n\n\t\tconst { className, stroke, fill, strokeWidth } = this.props;\n\n\t\tconst paths = helper(plotData, xAccessor).map((each, i) => {\n\t\t\tconst dataSeries = line()\n\t\t\t\t.x((item) => xScale(item[0]))\n\t\t\t\t.y((item) => yScale(item[1]))\n\t\t\t\t.curve(curveStepBefore);\n\n\t\t\tdataSeries(each.plot);\n\n\t\t\treturn (<path key={i} d={dataSeries(each.plot)} className={each.type}\n\t\t\t\tstroke={stroke[each.type]} fill={fill[each.type]} strokeWidth={strokeWidth} />);\n\t\t});\n\t\treturn (\n\t\t\t<g className={className}>\n\t\t\t\t{paths}\n\t\t\t</g>\n\t\t);\n\t}\n}\nKagiSeries.propTypes = {\n\tclassName: PropTypes.string,\n\tstroke: PropTypes.object,\n\tfill: PropTypes.object,\n\tstrokeWidth: PropTypes.number.isRequired,\n};\n\nKagiSeries.defaultProps = {\n\tclassName: \"react-stockcharts-kagi\",\n\tstrokeWidth: 2,\n\tstroke: {\n\t\tyang: \"#6BA583\",\n\t\tyin: \"#E60000\"\n\t},\n\tfill: {\n\t\tyang: \"none\",\n\t\tyin: \"none\"\n\t},\n\tcurrentValueStroke: \"#000000\",\n};\n\nfunction drawOnCanvas(ctx, props, moreProps, xAccessor) {\n\tconst { stroke, strokeWidth, currentValueStroke } = props;\n\tconst { xScale, chartConfig: { yScale }, plotData } = moreProps;\n\n\tconst paths = helper(plotData, xAccessor);\n\n\tlet begin = true;\n\n\tpaths.forEach((each) => {\n\t\tctx.strokeStyle = stroke[each.type];\n\t\tctx.lineWidth = strokeWidth;\n\n\t\tctx.beginPath();\n\t\tlet prevX;\n\t\teach.plot.forEach(d => {\n\t\t\tconst [x, y] = [xScale(d[0]), yScale(d[1])];\n\t\t\tif (begin) {\n\t\t\t\tctx.moveTo(x, y);\n\t\t\t\tbegin = false;\n\t\t\t} else {\n\t\t\t\tif (isDefined(prevX)) {\n\t\t\t\t\tctx.lineTo(prevX, y);\n\t\t\t\t}\n\t\t\t\tctx.lineTo(x, y);\n\t\t\t}\n\t\t\tprevX = x;\n\t\t\t// console.log(d);\n\n\t\t});\n\t\tctx.stroke();\n\t});\n\tconst lastPlot = paths[paths.length - 1].plot;\n\tconst last = lastPlot[lastPlot.length - 1];\n\tctx.beginPath();\n\t// ctx.strokeStyle = \"black\";\n\tctx.lineWidth = 1;\n\n\tconst [x, y1, y2] = [xScale(last[0]), yScale(last[2]), yScale(last[3])];\n\t// console.log(last, x, y);\n\tctx.moveTo(x, y1);\n\tctx.lineTo(x + 10, y1);\n\tctx.stroke();\n\n\tctx.beginPath();\n\tctx.strokeStyle = currentValueStroke;\n\tctx.moveTo(x - 10, y2);\n\tctx.lineTo(x, y2);\n\tctx.stroke();\n}\n\nfunction helper(plotData, xAccessor) {\n\tconst kagiLine = [];\n\tlet kagi = {};\n\tlet d = plotData[0];\n\tlet idx = xAccessor(d);\n\n\tfor (let i = 0; i < plotData.length; i++) {\n\t\td = plotData[i];\n\n\t\tif (isNotDefined(d.close)) continue;\n\t\tif (isNotDefined(kagi.type)) kagi.type = d.startAs;\n\t\tif (isNotDefined(kagi.plot)) kagi.plot = [];\n\n\t\tidx = xAccessor(d);\n\t\tkagi.plot.push([idx, d.open]);\n\n\t\tif (isDefined(d.changeTo)) {\n\t\t\tkagi.plot.push([idx, d.changePoint]);\n\t\t\tkagi.added = true;\n\t\t\tkagiLine.push(kagi);\n\n\t\t\tkagi = {\n\t\t\t\ttype: d.changeTo,\n\t\t\t\tplot: [],\n\t\t\t\tadded: false,\n\t\t\t};\n\t\t\tkagi.plot.push([idx, d.changePoint]);\n\t\t}\n\t}\n\n\tif (!kagi.added) {\n\t\tkagi.plot.push([idx, d.close, d.current, d.reverseAt]);\n\t\tkagiLine.push(kagi);\n\t}\n\n\t// console.log(d.reverseAt);\n\n\treturn kagiLine;\n}\n\nexport default KagiSeries;\n"]}},"error":null,"hash":"e767ddc4be1a81ddf57436273f400002","cacheData":{"env":{}}}