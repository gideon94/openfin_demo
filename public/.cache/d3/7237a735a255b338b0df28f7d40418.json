{"id":"../node_modules/react-stockcharts/lib/tooltip/HoverTooltip.js","dependencies":[{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/tooltip/HoverTooltip.js.map","includedInParent":true,"mtime":1536032206000},{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/package.json","includedInParent":true,"mtime":1602365273866},{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/public/.babelrc","includedInParent":true,"mtime":1602365273866},{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/package.json","includedInParent":true,"mtime":1602365360568},{"name":"react","loc":{"line":11,"column":21},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/tooltip/HoverTooltip.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react/react.js"},{"name":"prop-types","loc":{"line":15,"column":25},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/tooltip/HoverTooltip.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/prop-types/index.js"},{"name":"../GenericComponent","loc":{"line":19,"column":32},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/tooltip/HoverTooltip.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/GenericComponent.js"},{"name":"d3-array","loc":{"line":23,"column":23},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/tooltip/HoverTooltip.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/d3-array/src/index.js"},{"name":"../utils","loc":{"line":25,"column":21},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/tooltip/HoverTooltip.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/utils/index.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _GenericComponent = require(\"../GenericComponent\");\n\nvar _GenericComponent2 = _interopRequireDefault(_GenericComponent);\n\nvar _d3Array = require(\"d3-array\");\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar HoverTooltip = function (_Component) {\n\t_inherits(HoverTooltip, _Component);\n\n\tfunction HoverTooltip(props) {\n\t\t_classCallCheck(this, HoverTooltip);\n\n\t\tvar _this = _possibleConstructorReturn(this, (HoverTooltip.__proto__ || Object.getPrototypeOf(HoverTooltip)).call(this, props));\n\n\t\t_this.renderSVG = _this.renderSVG.bind(_this);\n\t\t_this.drawOnCanvas = _this.drawOnCanvas.bind(_this);\n\t\treturn _this;\n\t}\n\n\t_createClass(HoverTooltip, [{\n\t\tkey: \"drawOnCanvas\",\n\t\tvalue: function drawOnCanvas(ctx, moreProps) {\n\t\t\tvar pointer = helper(this.props, moreProps, ctx);\n\t\t\tvar height = moreProps.height;\n\n\n\t\t\tif ((0, _utils.isNotDefined)(pointer)) return null;\n\t\t\t_drawOnCanvas(ctx, this.props, this.context, pointer, height, moreProps);\n\t\t}\n\t}, {\n\t\tkey: \"render\",\n\t\tvalue: function render() {\n\t\t\treturn _react2.default.createElement(_GenericComponent2.default, {\n\t\t\t\tsvgDraw: this.renderSVG,\n\t\t\t\tcanvasDraw: this.drawOnCanvas,\n\t\t\t\tdrawOn: [\"mousemove\", \"pan\" /* , \"mouseleave\" */]\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: \"renderSVG\",\n\t\tvalue: function renderSVG(moreProps) {\n\t\t\tvar pointer = helper(this.props, moreProps);\n\n\t\t\tif ((0, _utils.isNotDefined)(pointer)) return null;\n\n\t\t\tvar _props = this.props,\n\t\t\t    bgFill = _props.bgFill,\n\t\t\t    bgOpacity = _props.bgOpacity,\n\t\t\t    backgroundShapeSVG = _props.backgroundShapeSVG,\n\t\t\t    tooltipSVG = _props.tooltipSVG;\n\t\t\tvar _props2 = this.props,\n\t\t\t    bgheight = _props2.bgheight,\n\t\t\t    bgwidth = _props2.bgwidth;\n\t\t\tvar height = moreProps.height;\n\t\t\tvar x = pointer.x,\n\t\t\t    y = pointer.y,\n\t\t\t    content = pointer.content,\n\t\t\t    centerX = pointer.centerX,\n\t\t\t    pointWidth = pointer.pointWidth,\n\t\t\t    bgSize = pointer.bgSize;\n\n\n\t\t\tvar bgShape = (0, _utils.isDefined)(bgwidth) && (0, _utils.isDefined)(bgheight) ? { width: bgwidth, height: bgheight } : bgSize;\n\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t\"g\",\n\t\t\t\tnull,\n\t\t\t\t_react2.default.createElement(\"rect\", { x: centerX - pointWidth / 2,\n\t\t\t\t\ty: 0,\n\t\t\t\t\twidth: pointWidth,\n\t\t\t\t\theight: height,\n\t\t\t\t\tfill: bgFill,\n\t\t\t\t\topacity: bgOpacity }),\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t\"g\",\n\t\t\t\t\t{ className: \"react-stockcharts-tooltip-content\", transform: \"translate(\" + x + \", \" + y + \")\" },\n\t\t\t\t\tbackgroundShapeSVG(this.props, bgShape),\n\t\t\t\t\ttooltipSVG(this.props, content)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}]);\n\n\treturn HoverTooltip;\n}(_react.Component);\n\nHoverTooltip.propTypes = {\n\tchartId: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\tyAccessor: _propTypes2.default.func,\n\ttooltipSVG: _propTypes2.default.func,\n\tbackgroundShapeSVG: _propTypes2.default.func,\n\tbgwidth: _propTypes2.default.number,\n\tbgheight: _propTypes2.default.number,\n\tbgFill: _propTypes2.default.string.isRequired,\n\tbgOpacity: _propTypes2.default.number.isRequired,\n\ttooltipContent: _propTypes2.default.func.isRequired,\n\torigin: _propTypes2.default.oneOfType([_propTypes2.default.array, _propTypes2.default.func]).isRequired,\n\tfontFamily: _propTypes2.default.string,\n\tfontSize: _propTypes2.default.number\n};\n\nHoverTooltip.contextTypes = {\n\tmargin: _propTypes2.default.object.isRequired,\n\tratio: _propTypes2.default.number.isRequired\n};\n\nHoverTooltip.defaultProps = {\n\t// bgwidth: 150,\n\t// bgheight: 50,\n\ttooltipSVG: tooltipSVG,\n\ttooltipCanvas: tooltipCanvas,\n\torigin: origin,\n\tfill: \"#D4E2FD\",\n\tbgFill: \"#D4E2FD\",\n\tbgOpacity: 0.5,\n\tstroke: \"#9B9BFF\",\n\tfontFill: \"#000000\",\n\topacity: 0.8,\n\tbackgroundShapeSVG: backgroundShapeSVG,\n\tbackgroundShapeCanvas: backgroundShapeCanvas,\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n\tfontSize: 12\n};\n\nvar PADDING = 5;\nvar X = 10;\nvar Y = 10;\n\n/* eslint-disable react/prop-types */\nfunction backgroundShapeSVG(_ref, _ref2) {\n\tvar fill = _ref.fill,\n\t    stroke = _ref.stroke,\n\t    opacity = _ref.opacity;\n\tvar height = _ref2.height,\n\t    width = _ref2.width;\n\n\treturn _react2.default.createElement(\"rect\", {\n\t\theight: height,\n\t\twidth: width,\n\t\tfill: fill,\n\t\topacity: opacity,\n\t\tstroke: stroke });\n}\n\nfunction tooltipSVG(_ref3, content) {\n\tvar fontFamily = _ref3.fontFamily,\n\t    fontSize = _ref3.fontSize,\n\t    fontFill = _ref3.fontFill;\n\n\tvar tspans = [];\n\tvar startY = Y + fontSize * 0.9;\n\n\tfor (var i = 0; i < content.y.length; i++) {\n\t\tvar y = content.y[i];\n\t\tvar textY = startY + fontSize * (i + 1);\n\n\t\ttspans.push(_react2.default.createElement(\n\t\t\t\"tspan\",\n\t\t\t{ key: \"L-\" + i, x: X, y: textY, fill: y.stroke },\n\t\t\ty.label\n\t\t));\n\t\ttspans.push(_react2.default.createElement(\n\t\t\t\"tspan\",\n\t\t\t{ key: i },\n\t\t\t\": \"\n\t\t));\n\t\ttspans.push(_react2.default.createElement(\n\t\t\t\"tspan\",\n\t\t\t{ key: \"V-\" + i },\n\t\t\ty.value\n\t\t));\n\t}\n\treturn _react2.default.createElement(\n\t\t\"text\",\n\t\t{ fontFamily: fontFamily, fontSize: fontSize, fill: fontFill },\n\t\t_react2.default.createElement(\n\t\t\t\"tspan\",\n\t\t\t{ x: X, y: startY },\n\t\t\tcontent.x\n\t\t),\n\t\ttspans\n\t);\n}\n/* eslint-enable react/prop-types */\n\nfunction backgroundShapeCanvas(props, _ref4, ctx) {\n\tvar width = _ref4.width,\n\t    height = _ref4.height;\n\tvar fill = props.fill,\n\t    stroke = props.stroke,\n\t    opacity = props.opacity;\n\n\n\tctx.fillStyle = (0, _utils.hexToRGBA)(fill, opacity);\n\tctx.strokeStyle = stroke;\n\tctx.beginPath();\n\tctx.rect(0, 0, width, height);\n\tctx.fill();\n\tctx.stroke();\n}\n\nfunction tooltipCanvas(_ref5, content, ctx) {\n\tvar fontFamily = _ref5.fontFamily,\n\t    fontSize = _ref5.fontSize,\n\t    fontFill = _ref5.fontFill;\n\n\tvar startY = Y + fontSize * 0.9;\n\tctx.font = fontSize + \"px \" + fontFamily;\n\tctx.fillStyle = fontFill;\n\tctx.textAlign = \"left\";\n\tctx.fillText(content.x, X, startY);\n\n\tfor (var i = 0; i < content.y.length; i++) {\n\t\tvar y = content.y[i];\n\t\tvar textY = startY + fontSize * (i + 1);\n\t\tctx.fillStyle = y.stroke || fontFill;\n\t\tctx.fillText(y.label, X, textY);\n\n\t\tctx.fillStyle = fontFill;\n\t\tctx.fillText(\": \" + y.value, X + ctx.measureText(y.label).width, textY);\n\t}\n}\n\nfunction _drawOnCanvas(ctx, props, context, pointer, height) {\n\tvar margin = context.margin,\n\t    ratio = context.ratio;\n\tvar bgFill = props.bgFill,\n\t    bgOpacity = props.bgOpacity;\n\tvar backgroundShapeCanvas = props.backgroundShapeCanvas,\n\t    tooltipCanvas = props.tooltipCanvas;\n\n\n\tvar originX = 0.5 * ratio + margin.left;\n\tvar originY = 0.5 * ratio + margin.top;\n\n\tctx.save();\n\n\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\tctx.scale(ratio, ratio);\n\n\tctx.translate(originX, originY);\n\n\tvar x = pointer.x,\n\t    y = pointer.y,\n\t    content = pointer.content,\n\t    centerX = pointer.centerX,\n\t    pointWidth = pointer.pointWidth,\n\t    bgSize = pointer.bgSize;\n\n\n\tctx.fillStyle = (0, _utils.hexToRGBA)(bgFill, bgOpacity);\n\tctx.beginPath();\n\tctx.rect(centerX - pointWidth / 2, 0, pointWidth, height);\n\tctx.fill();\n\n\tctx.translate(x, y);\n\tbackgroundShapeCanvas(props, bgSize, ctx);\n\ttooltipCanvas(props, content, ctx);\n\n\tctx.restore();\n}\n\nfunction calculateTooltipSize(_ref6, content, ctx) {\n\tvar fontFamily = _ref6.fontFamily,\n\t    fontSize = _ref6.fontSize,\n\t    fontFill = _ref6.fontFill;\n\n\tif ((0, _utils.isNotDefined)(ctx)) {\n\t\tvar canvas = document.createElement(\"canvas\");\n\t\tctx = canvas.getContext(\"2d\");\n\t}\n\n\tctx.font = fontSize + \"px \" + fontFamily;\n\tctx.fillStyle = fontFill;\n\tctx.textAlign = \"left\";\n\n\tvar measureText = function measureText(str) {\n\t\treturn {\n\t\t\twidth: ctx.measureText(str).width,\n\t\t\theight: fontSize\n\t\t};\n\t};\n\n\tvar _content$y$map$reduce = content.y.map(function (_ref7) {\n\t\tvar label = _ref7.label,\n\t\t    value = _ref7.value;\n\t\treturn measureText(label + \": \" + value);\n\t})\n\t// Sum all y and x sizes (begin with x label size)\n\t.reduce(function (res, size) {\n\t\treturn sumSizes(res, size);\n\t}, measureText(String(content.x))),\n\t    width = _content$y$map$reduce.width,\n\t    height = _content$y$map$reduce.height;\n\n\treturn {\n\t\twidth: width + 2 * X,\n\t\theight: height + 2 * Y\n\t};\n}\n\nfunction sumSizes() {\n\tfor (var _len = arguments.length, sizes = Array(_len), _key = 0; _key < _len; _key++) {\n\t\tsizes[_key] = arguments[_key];\n\t}\n\n\treturn {\n\t\twidth: Math.max.apply(Math, _toConsumableArray(sizes.map(function (size) {\n\t\t\treturn size.width;\n\t\t}))),\n\t\theight: (0, _d3Array.sum)(sizes, function (d) {\n\t\t\treturn d.height;\n\t\t})\n\t};\n}\n\nfunction normalizeX(x, bgSize, pointWidth, width) {\n\t// return x - bgSize.width - pointWidth / 2 - PADDING * 2 < 0\n\treturn x < width / 2 ? x + pointWidth / 2 + PADDING : x - bgSize.width - pointWidth / 2 - PADDING;\n}\n\nfunction normalizeY(y, bgSize) {\n\treturn y - bgSize.height <= 0 ? y + PADDING : y - bgSize.height - PADDING;\n}\n\nfunction origin(props, moreProps, bgSize, pointWidth) {\n\tvar chartId = props.chartId,\n\t    yAccessor = props.yAccessor;\n\tvar mouseXY = moreProps.mouseXY,\n\t    xAccessor = moreProps.xAccessor,\n\t    currentItem = moreProps.currentItem,\n\t    xScale = moreProps.xScale,\n\t    chartConfig = moreProps.chartConfig,\n\t    width = moreProps.width;\n\n\tvar y = (0, _utils.last)(mouseXY);\n\n\tvar xValue = xAccessor(currentItem);\n\tvar x = Math.round(xScale(xValue));\n\n\tif ((0, _utils.isDefined)(chartId) && (0, _utils.isDefined)(yAccessor) && (0, _utils.isDefined)(chartConfig) && (0, _utils.isDefined)(chartConfig.findIndex)) {\n\t\tvar yValue = yAccessor(currentItem);\n\t\tvar chartIndex = chartConfig.findIndex(function (x) {\n\t\t\treturn x.id === chartId;\n\t\t});\n\n\t\ty = Math.round(chartConfig[chartIndex].yScale(yValue));\n\t}\n\n\tx = normalizeX(x, bgSize, pointWidth, width);\n\ty = normalizeY(y, bgSize);\n\n\treturn [x, y];\n}\n\nfunction helper(props, moreProps, ctx) {\n\tvar show = moreProps.show,\n\t    xScale = moreProps.xScale,\n\t    currentItem = moreProps.currentItem,\n\t    plotData = moreProps.plotData;\n\tvar origin = props.origin,\n\t    tooltipContent = props.tooltipContent;\n\tvar xAccessor = moreProps.xAccessor,\n\t    displayXAccessor = moreProps.displayXAccessor;\n\n\n\tif (!show || (0, _utils.isNotDefined)(currentItem)) return;\n\n\tvar xValue = xAccessor(currentItem);\n\n\tif (!show || (0, _utils.isNotDefined)(xValue)) return;\n\n\tvar content = tooltipContent({ currentItem: currentItem, xAccessor: displayXAccessor });\n\tvar centerX = xScale(xValue);\n\tvar pointWidth = Math.abs(xScale(xAccessor((0, _utils.last)(plotData))) - xScale(xAccessor((0, _utils.first)(plotData)))) / (plotData.length - 1);\n\n\tvar bgSize = calculateTooltipSize(props, content, ctx);\n\n\tvar _origin = origin(props, moreProps, bgSize, pointWidth),\n\t    _origin2 = _slicedToArray(_origin, 2),\n\t    x = _origin2[0],\n\t    y = _origin2[1];\n\n\treturn { x: x, y: y, content: content, centerX: centerX, pointWidth: pointWidth, bgSize: bgSize };\n}\n\nexports.default = HoverTooltip;\n"},"sourceMaps":{"js":{"version":3,"sources":["../../../src/lib/tooltip/HoverTooltip.js"],"names":["HoverTooltip","props","renderSVG","bind","drawOnCanvas","ctx","moreProps","pointer","helper","height","context","bgFill","bgOpacity","backgroundShapeSVG","tooltipSVG","bgheight","bgwidth","x","y","content","centerX","pointWidth","bgSize","bgShape","width","propTypes","chartId","oneOfType","number","string","yAccessor","func","isRequired","tooltipContent","origin","array","fontFamily","fontSize","contextTypes","margin","object","ratio","defaultProps","tooltipCanvas","fill","stroke","fontFill","opacity","backgroundShapeCanvas","PADDING","X","Y","tspans","startY","i","length","textY","push","label","value","fillStyle","strokeStyle","beginPath","rect","font","textAlign","fillText","measureText","originX","left","originY","top","save","setTransform","scale","translate","restore","calculateTooltipSize","canvas","document","createElement","getContext","str","map","reduce","res","size","sumSizes","String","sizes","Math","max","d","normalizeX","normalizeY","mouseXY","xAccessor","currentItem","xScale","chartConfig","xValue","round","findIndex","yValue","chartIndex","id","yScale","show","plotData","displayXAccessor","abs"],"mappings":"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","file":"HoverTooltip.js","sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport GenericComponent from \"../GenericComponent\";\nimport { sum } from \"d3-array\";\n\nimport { first, last, isNotDefined, isDefined, hexToRGBA } from \"../utils\";\n\nclass HoverTooltip extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst pointer = helper(this.props, moreProps, ctx);\n\t\tconst { height } = moreProps;\n\n\t\tif (isNotDefined(pointer)) return null;\n\t\tdrawOnCanvas(ctx, this.props, this.context, pointer, height, moreProps);\n\t}\n\trender() {\n\t\treturn <GenericComponent\n\t\t\tsvgDraw={this.renderSVG}\n\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\tdrawOn={[\"mousemove\", \"pan\"/* , \"mouseleave\" */]}\n\t\t/>;\n\t}\n\trenderSVG(moreProps) {\n\t\tconst pointer = helper(this.props, moreProps);\n\n\t\tif (isNotDefined(pointer)) return null;\n\n\t\tconst { bgFill, bgOpacity, backgroundShapeSVG, tooltipSVG } = this.props;\n\t\tconst { bgheight, bgwidth } = this.props;\n\t\tconst { height } = moreProps;\n\n\t\tconst { x, y, content, centerX, pointWidth, bgSize } = pointer;\n\n\t\tconst bgShape = isDefined(bgwidth) && isDefined(bgheight)\n\t\t\t? { width: bgwidth, height: bgheight }\n\t\t\t: bgSize;\n\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t<rect x={centerX - pointWidth / 2}\n\t\t\t\t\ty={0}\n\t\t\t\t\twidth={pointWidth}\n\t\t\t\t\theight={height}\n\t\t\t\t\tfill={bgFill}\n\t\t\t\t\topacity={bgOpacity} />\n\t\t\t\t<g className=\"react-stockcharts-tooltip-content\" transform={`translate(${x}, ${y})`}>\n\t\t\t\t\t{backgroundShapeSVG(this.props, bgShape)}\n\t\t\t\t\t{tooltipSVG(this.props, content)}\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nHoverTooltip.propTypes = {\n\tchartId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\tyAccessor: PropTypes.func,\n\ttooltipSVG: PropTypes.func,\n\tbackgroundShapeSVG: PropTypes.func,\n\tbgwidth: PropTypes.number,\n\tbgheight: PropTypes.number,\n\tbgFill: PropTypes.string.isRequired,\n\tbgOpacity: PropTypes.number.isRequired,\n\ttooltipContent: PropTypes.func.isRequired,\n\torigin: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.func\n\t]).isRequired,\n\tfontFamily: PropTypes.string,\n\tfontSize: PropTypes.number,\n};\n\nHoverTooltip.contextTypes = {\n\tmargin: PropTypes.object.isRequired,\n\tratio: PropTypes.number.isRequired,\n};\n\nHoverTooltip.defaultProps = {\n\t// bgwidth: 150,\n\t// bgheight: 50,\n\ttooltipSVG: tooltipSVG,\n\ttooltipCanvas: tooltipCanvas,\n\torigin: origin,\n\tfill: \"#D4E2FD\",\n\tbgFill: \"#D4E2FD\",\n\tbgOpacity: 0.5,\n\tstroke: \"#9B9BFF\",\n\tfontFill: \"#000000\",\n\topacity: 0.8,\n\tbackgroundShapeSVG: backgroundShapeSVG,\n\tbackgroundShapeCanvas: backgroundShapeCanvas,\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n\tfontSize: 12,\n};\n\nconst PADDING = 5;\nconst X = 10;\nconst Y = 10;\n\n\n/* eslint-disable react/prop-types */\nfunction backgroundShapeSVG({ fill, stroke, opacity }, { height, width }) {\n\treturn <rect\n\t\theight={height}\n\t\twidth={width}\n\t\tfill={fill}\n\t\topacity={opacity}\n\t\tstroke={stroke} />;\n}\n\nfunction tooltipSVG({ fontFamily, fontSize, fontFill }, content) {\n\tconst tspans = [];\n\tconst startY = Y + fontSize * 0.9;\n\n\tfor (let i = 0; i < content.y.length; i++) {\n\t\tconst y = content.y[i];\n\t\tconst textY = startY + (fontSize * (i + 1));\n\n\t\ttspans.push(<tspan key={`L-${i}`} x={X} y={textY} fill={y.stroke}>{y.label}</tspan>);\n\t\ttspans.push(<tspan key={i}>: </tspan>);\n\t\ttspans.push(<tspan key={`V-${i}`}>{y.value}</tspan>);\n\t}\n\treturn <text fontFamily={fontFamily} fontSize={fontSize} fill={fontFill}>\n\t\t<tspan x={X} y={startY}>{content.x}</tspan>\n\t\t{tspans}\n\t</text>;\n}\n/* eslint-enable react/prop-types */\n\nfunction backgroundShapeCanvas(props, { width, height }, ctx) {\n\tconst { fill, stroke, opacity } = props;\n\n\tctx.fillStyle = hexToRGBA(fill, opacity);\n\tctx.strokeStyle = stroke;\n\tctx.beginPath();\n\tctx.rect(0, 0, width, height);\n\tctx.fill();\n\tctx.stroke();\n}\n\nfunction tooltipCanvas({ fontFamily, fontSize, fontFill }, content, ctx) {\n\tconst startY = Y + fontSize * 0.9;\n\tctx.font = `${fontSize}px ${fontFamily}`;\n\tctx.fillStyle = fontFill;\n\tctx.textAlign = \"left\";\n\tctx.fillText(content.x, X, startY);\n\n\tfor (let i = 0; i < content.y.length; i++) {\n\t\tconst y = content.y[i];\n\t\tconst textY = startY + (fontSize * (i + 1));\n\t\tctx.fillStyle = y.stroke || fontFill;\n\t\tctx.fillText(y.label, X, textY);\n\n\t\tctx.fillStyle = fontFill;\n\t\tctx.fillText(\": \" + y.value, X + ctx.measureText(y.label).width, textY);\n\t}\n}\n\nfunction drawOnCanvas(ctx, props, context, pointer, height) {\n\n\tconst { margin, ratio } = context;\n\tconst { bgFill, bgOpacity } = props;\n\tconst { backgroundShapeCanvas, tooltipCanvas } = props;\n\n\tconst originX = 0.5 * ratio + margin.left;\n\tconst originY = 0.5 * ratio + margin.top;\n\n\tctx.save();\n\n\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\tctx.scale(ratio, ratio);\n\n\tctx.translate(originX, originY);\n\n\tconst { x, y, content, centerX, pointWidth, bgSize } = pointer;\n\n\tctx.fillStyle = hexToRGBA(bgFill, bgOpacity);\n\tctx.beginPath();\n\tctx.rect(centerX - pointWidth / 2, 0, pointWidth, height);\n\tctx.fill();\n\n\tctx.translate(x, y);\n\tbackgroundShapeCanvas(props, bgSize, ctx);\n\ttooltipCanvas(props, content, ctx);\n\n\tctx.restore();\n}\n\nfunction calculateTooltipSize({ fontFamily, fontSize, fontFill }, content, ctx) {\n\tif (isNotDefined(ctx)) {\n\t\tconst canvas = document.createElement(\"canvas\");\n\t\tctx = canvas.getContext(\"2d\");\n\t}\n\n\tctx.font = `${fontSize}px ${fontFamily}`;\n\tctx.fillStyle = fontFill;\n\tctx.textAlign = \"left\";\n\n\tconst measureText = str => ({\n\t\twidth: ctx.measureText(str).width,\n\t\theight: fontSize,\n\t});\n\n\tconst { width, height } = content.y\n\t\t.map(({ label, value }) => measureText(`${label}: ${value}`))\n\t\t// Sum all y and x sizes (begin with x label size)\n\t\t.reduce((res, size) => sumSizes(res, size), measureText(String(content.x)))\n\t;\n\n\treturn {\n\t\twidth: width + 2 * X,\n\t\theight: height + 2 * Y\n\t};\n}\n\nfunction sumSizes(...sizes) {\n\treturn {\n\t\twidth: Math.max(...sizes.map(size => size.width)),\n\t\theight: sum(sizes, d => d.height),\n\t};\n}\n\nfunction normalizeX(x, bgSize, pointWidth, width) {\n\t// return x - bgSize.width - pointWidth / 2 - PADDING * 2 < 0\n\treturn x < width / 2\n\t\t? x + pointWidth / 2 + PADDING\n\t\t: x - bgSize.width - pointWidth / 2 - PADDING;\n}\n\nfunction normalizeY(y, bgSize) {\n\treturn y - bgSize.height <= 0\n\t\t? y + PADDING\n\t\t: y - bgSize.height - PADDING;\n}\n\nfunction origin(props, moreProps, bgSize, pointWidth) {\n\tconst { chartId, yAccessor } = props;\n\tconst { mouseXY, xAccessor, currentItem, xScale, chartConfig, width } = moreProps;\n\tlet y = last(mouseXY);\n\n\tconst xValue = xAccessor(currentItem);\n\tlet x = Math.round(xScale(xValue));\n\n\tif (isDefined(chartId) && isDefined(yAccessor)\n\t\t\t&& isDefined(chartConfig) && isDefined(chartConfig.findIndex)) {\n\t\tconst yValue = yAccessor(currentItem);\n\t\tconst chartIndex = chartConfig.findIndex(x => x.id === chartId);\n\n\t\ty = Math.round(chartConfig[chartIndex].yScale(yValue));\n\t}\n\n\tx = normalizeX(x, bgSize, pointWidth, width);\n\ty = normalizeY(y, bgSize);\n\n\treturn [x, y];\n}\n\nfunction helper(props, moreProps, ctx) {\n\tconst { show, xScale, currentItem, plotData } = moreProps;\n\tconst { origin, tooltipContent } = props;\n\tconst { xAccessor, displayXAccessor } = moreProps;\n\n\tif (!show || isNotDefined(currentItem)) return;\n\n\tconst xValue = xAccessor(currentItem);\n\n\tif (!show || isNotDefined(xValue)) return;\n\n\tconst content = tooltipContent({ currentItem, xAccessor: displayXAccessor });\n\tconst centerX = xScale(xValue);\n\tconst pointWidth = Math.abs(xScale(xAccessor(last(plotData))) - xScale(xAccessor(first(plotData)))) / (plotData.length - 1);\n\n\tconst bgSize = calculateTooltipSize(props, content, ctx);\n\n\tconst [x, y] = origin(props, moreProps, bgSize, pointWidth);\n\n\treturn { x, y, content, centerX, pointWidth, bgSize };\n}\n\nexport default HoverTooltip;\n"]}},"error":null,"hash":"4312c02e8bc041381fe81acafbcbe16c","cacheData":{"env":{}}}