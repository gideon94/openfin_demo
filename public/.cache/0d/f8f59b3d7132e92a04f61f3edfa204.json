{"id":"../node_modules/react-stockcharts/lib/series/OHLCSeries.js","dependencies":[{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/series/OHLCSeries.js.map","includedInParent":true,"mtime":1536032206000},{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/package.json","includedInParent":true,"mtime":1602365273866},{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/public/.babelrc","includedInParent":true,"mtime":1602365273866},{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/package.json","includedInParent":true,"mtime":1602365360568},{"name":"d3-collection","loc":{"line":9,"column":28},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/series/OHLCSeries.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/d3-collection/src/index.js"},{"name":"react","loc":{"line":11,"column":21},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/series/OHLCSeries.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react/react.js"},{"name":"prop-types","loc":{"line":15,"column":25},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/series/OHLCSeries.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/prop-types/index.js"},{"name":"../GenericChartComponent","loc":{"line":19,"column":37},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/series/OHLCSeries.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/GenericChartComponent.js"},{"name":"../GenericComponent","loc":{"line":23,"column":32},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/series/OHLCSeries.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/GenericComponent.js"},{"name":"../utils","loc":{"line":25,"column":21},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/series/OHLCSeries.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/utils/index.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _d3Collection = require(\"d3-collection\");\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _GenericChartComponent = require(\"../GenericChartComponent\");\n\nvar _GenericChartComponent2 = _interopRequireDefault(_GenericChartComponent);\n\nvar _GenericComponent = require(\"../GenericComponent\");\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar OHLCSeries = function (_Component) {\n\t_inherits(OHLCSeries, _Component);\n\n\tfunction OHLCSeries(props) {\n\t\t_classCallCheck(this, OHLCSeries);\n\n\t\tvar _this = _possibleConstructorReturn(this, (OHLCSeries.__proto__ || Object.getPrototypeOf(OHLCSeries)).call(this, props));\n\n\t\t_this.renderSVG = _this.renderSVG.bind(_this);\n\t\t_this.drawOnCanvas = _this.drawOnCanvas.bind(_this);\n\t\treturn _this;\n\t}\n\n\t_createClass(OHLCSeries, [{\n\t\tkey: \"drawOnCanvas\",\n\t\tvalue: function drawOnCanvas(ctx, moreProps) {\n\t\t\tvar yAccessor = this.props.yAccessor;\n\t\t\tvar xAccessor = moreProps.xAccessor;\n\t\t\tvar xScale = moreProps.xScale,\n\t\t\t    yScale = moreProps.chartConfig.yScale,\n\t\t\t    plotData = moreProps.plotData;\n\n\n\t\t\tvar barData = getOHLCBars(this.props, xAccessor, yAccessor, xScale, yScale, plotData);\n\t\t\t_drawOnCanvas(ctx, barData);\n\t\t}\n\t}, {\n\t\tkey: \"render\",\n\t\tvalue: function render() {\n\t\t\tvar clip = this.props.clip;\n\n\n\t\t\treturn _react2.default.createElement(_GenericChartComponent2.default, {\n\t\t\t\tsvgDraw: this.renderSVG,\n\t\t\t\tcanvasToDraw: _GenericComponent.getAxisCanvas,\n\t\t\t\tcanvasDraw: this.drawOnCanvas,\n\t\t\t\tclip: clip,\n\t\t\t\tdrawOn: [\"pan\"]\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: \"renderSVG\",\n\t\tvalue: function renderSVG(moreProps) {\n\t\t\tvar _props = this.props,\n\t\t\t    className = _props.className,\n\t\t\t    yAccessor = _props.yAccessor;\n\t\t\tvar xAccessor = moreProps.xAccessor;\n\t\t\tvar xScale = moreProps.xScale,\n\t\t\t    yScale = moreProps.chartConfig.yScale,\n\t\t\t    plotData = moreProps.plotData;\n\n\n\t\t\tvar barData = getOHLCBars(this.props, xAccessor, yAccessor, xScale, yScale, plotData);\n\n\t\t\tvar strokeWidth = barData.strokeWidth,\n\t\t\t    bars = barData.bars;\n\n\n\t\t\treturn _react2.default.createElement(\n\t\t\t\t\"g\",\n\t\t\t\t{ className: className },\n\t\t\t\tbars.map(function (d, idx) {\n\t\t\t\t\treturn _react2.default.createElement(\"path\", { key: idx,\n\t\t\t\t\t\tclassName: d.className, stroke: d.stroke, strokeWidth: strokeWidth,\n\t\t\t\t\t\td: \"M\" + d.openX1 + \" \" + d.openY + \" L\" + d.openX2 + \" \" + d.openY + \" M\" + d.x + \" \" + d.y1 + \" L\" + d.x + \" \" + d.y2 + \" M\" + d.closeX1 + \" \" + d.closeY + \" L\" + d.closeX2 + \" \" + d.closeY });\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}]);\n\n\treturn OHLCSeries;\n}(_react.Component);\n\nOHLCSeries.propTypes = {\n\tclassName: _propTypes2.default.string,\n\tclassNames: _propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.string]).isRequired,\n\tstroke: _propTypes2.default.oneOfType([_propTypes2.default.func, _propTypes2.default.string]).isRequired,\n\tyAccessor: _propTypes2.default.func.isRequired,\n\tclip: _propTypes2.default.bool.isRequired\n};\n\nOHLCSeries.defaultProps = {\n\tclassName: \"react-stockcharts-ohlc\",\n\tyAccessor: function yAccessor(d) {\n\t\treturn { open: d.open, high: d.high, low: d.low, close: d.close };\n\t},\n\tclassNames: function classNames(d) {\n\t\treturn (0, _utils.isDefined)(d.absoluteChange) ? d.absoluteChange > 0 ? \"up\" : \"down\" : \"firstbar\";\n\t},\n\tstroke: function stroke(d) {\n\t\treturn (0, _utils.isDefined)(d.absoluteChange) ? d.absoluteChange > 0 ? \"#6BA583\" : \"#FF0000\" : \"#000000\";\n\t},\n\tclip: true\n};\n\nfunction _drawOnCanvas(ctx, barData) {\n\tvar strokeWidth = barData.strokeWidth,\n\t    bars = barData.bars;\n\n\n\tvar wickNest = (0, _d3Collection.nest)().key(function (d) {\n\t\treturn d.stroke;\n\t}).entries(bars);\n\n\tctx.lineWidth = strokeWidth;\n\n\twickNest.forEach(function (outer) {\n\t\tvar key = outer.key,\n\t\t    values = outer.values;\n\n\t\tctx.strokeStyle = key;\n\t\tvalues.forEach(function (d) {\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(d.x, d.y1);\n\t\t\tctx.lineTo(d.x, d.y2);\n\n\t\t\tctx.moveTo(d.openX1, d.openY);\n\t\t\tctx.lineTo(d.openX2, d.openY);\n\n\t\t\tctx.moveTo(d.closeX1, d.closeY);\n\t\t\tctx.lineTo(d.closeX2, d.closeY);\n\n\t\t\tctx.stroke();\n\t\t});\n\t});\n}\n\nfunction getOHLCBars(props, xAccessor, yAccessor, xScale, yScale, plotData) {\n\tvar classNamesProp = props.classNames,\n\t    strokeProp = props.stroke;\n\n\n\tvar strokeFunc = (0, _utils.functor)(strokeProp);\n\tvar classNameFunc = (0, _utils.functor)(classNamesProp);\n\n\tvar width = xScale(xAccessor(plotData[plotData.length - 1])) - xScale(xAccessor(plotData[0]));\n\n\tvar barWidth = Math.max(1, Math.round(width / (plotData.length - 1) / 2) - 1.5);\n\tvar strokeWidth = Math.min(barWidth, 6);\n\n\tvar bars = plotData.filter(function (d) {\n\t\treturn (0, _utils.isDefined)(yAccessor(d).close);\n\t}).map(function (d) {\n\t\tvar ohlc = yAccessor(d),\n\t\t    x = Math.round(xScale(xAccessor(d))),\n\t\t    y1 = yScale(ohlc.high),\n\t\t    y2 = yScale(ohlc.low),\n\t\t    openX1 = x - barWidth,\n\t\t    openX2 = x + strokeWidth / 2,\n\t\t    openY = yScale(ohlc.open),\n\t\t    closeX1 = x - strokeWidth / 2,\n\t\t    closeX2 = x + barWidth,\n\t\t    closeY = yScale(ohlc.close),\n\t\t    className = classNameFunc(d),\n\t\t    stroke = strokeFunc(d);\n\n\t\treturn { x: x, y1: y1, y2: y2, openX1: openX1, openX2: openX2, openY: openY, closeX1: closeX1, closeX2: closeX2, closeY: closeY, stroke: stroke, className: className };\n\t});\n\treturn { barWidth: barWidth, strokeWidth: strokeWidth, bars: bars };\n}\n\nexports.default = OHLCSeries;\n"},"sourceMaps":{"js":{"version":3,"sources":["../../../src/lib/series/OHLCSeries.js"],"names":["OHLCSeries","props","renderSVG","bind","drawOnCanvas","ctx","moreProps","yAccessor","xAccessor","xScale","yScale","chartConfig","plotData","barData","getOHLCBars","clip","className","strokeWidth","bars","map","d","idx","stroke","openX1","openY","openX2","x","y1","y2","closeX1","closeY","closeX2","propTypes","string","classNames","oneOfType","func","isRequired","bool","defaultProps","open","high","low","close","absoluteChange","wickNest","key","entries","lineWidth","forEach","outer","values","strokeStyle","beginPath","moveTo","lineTo","classNamesProp","strokeProp","strokeFunc","classNameFunc","width","length","barWidth","Math","max","round","min","filter","ohlc"],"mappings":"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","file":"OHLCSeries.js","sourcesContent":["\n\nimport { nest } from \"d3-collection\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport GenericChartComponent from \"../GenericChartComponent\";\nimport { getAxisCanvas } from \"../GenericComponent\";\n\nimport { isDefined, functor } from \"../utils\";\n\nclass OHLCSeries extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst { yAccessor } = this.props;\n\t\tconst { xAccessor } = moreProps;\n\t\tconst { xScale, chartConfig: { yScale }, plotData } = moreProps;\n\n\t\tconst barData = getOHLCBars(this.props, xAccessor, yAccessor, xScale, yScale, plotData);\n\t\tdrawOnCanvas(ctx, barData);\n\t}\n\trender() {\n\t\tconst { clip } = this.props;\n\n\t\treturn <GenericChartComponent\n\t\t\tsvgDraw={this.renderSVG}\n\t\t\tcanvasToDraw={getAxisCanvas}\n\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\tclip={clip}\n\t\t\tdrawOn={[\"pan\"]}\n\t\t/>;\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { className, yAccessor } = this.props;\n\t\tconst { xAccessor } = moreProps;\n\t\tconst { xScale, chartConfig: { yScale }, plotData } = moreProps;\n\n\n\t\tconst barData = getOHLCBars(this.props, xAccessor, yAccessor, xScale, yScale, plotData);\n\n\t\tconst { strokeWidth, bars } = barData;\n\n\t\treturn <g className={className}>\n\t\t\t{bars.map((d, idx) => <path key={idx}\n\t\t\t\tclassName={d.className} stroke={d.stroke} strokeWidth={strokeWidth}\n\t\t\t\td={`M${d.openX1} ${d.openY} L${d.openX2} ${d.openY} M${d.x} ${d.y1} L${d.x} ${d.y2} M${d.closeX1} ${d.closeY} L${d.closeX2} ${d.closeY}`}/>)}\n\t\t</g>;\n\t}\n}\n\nOHLCSeries.propTypes = {\n\tclassName: PropTypes.string,\n\tclassNames: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string\n\t]).isRequired,\n\tstroke: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string\n\t]).isRequired,\n\tyAccessor: PropTypes.func.isRequired,\n\tclip: PropTypes.bool.isRequired,\n};\n\nOHLCSeries.defaultProps = {\n\tclassName: \"react-stockcharts-ohlc\",\n\tyAccessor: (d) => ({ open: d.open, high: d.high, low: d.low, close: d.close }),\n\tclassNames: d => isDefined(d.absoluteChange) ? (d.absoluteChange > 0 ? \"up\" : \"down\") : \"firstbar\",\n\tstroke: d => isDefined(d.absoluteChange) ? (d.absoluteChange > 0 ? \"#6BA583\" : \"#FF0000\") : \"#000000\",\n\tclip: true,\n};\n\nfunction drawOnCanvas(ctx, barData) {\n\n\tconst { strokeWidth, bars } = barData;\n\n\tconst wickNest = nest()\n\t\t.key(d => d.stroke)\n\t\t.entries(bars);\n\n\tctx.lineWidth = strokeWidth;\n\n\twickNest.forEach(outer => {\n\t\tconst { key, values } = outer;\n\t\tctx.strokeStyle = key;\n\t\tvalues.forEach(d => {\n\t\t\tctx.beginPath();\n\t\t\tctx.moveTo(d.x, d.y1);\n\t\t\tctx.lineTo(d.x, d.y2);\n\n\t\t\tctx.moveTo(d.openX1, d.openY);\n\t\t\tctx.lineTo(d.openX2, d.openY);\n\n\t\t\tctx.moveTo(d.closeX1, d.closeY);\n\t\t\tctx.lineTo(d.closeX2, d.closeY);\n\n\t\t\tctx.stroke();\n\t\t});\n\t});\n}\n\nfunction getOHLCBars(props, xAccessor, yAccessor, xScale, yScale, plotData) {\n\tconst { classNames: classNamesProp, stroke: strokeProp } = props;\n\n\tconst strokeFunc = functor(strokeProp);\n\tconst classNameFunc = functor(classNamesProp);\n\n\tconst width = xScale(xAccessor(plotData[plotData.length - 1]))\n\t\t- xScale(xAccessor(plotData[0]));\n\n\tconst barWidth = Math.max(1, Math.round(width / (plotData.length - 1) / 2) - 1.5);\n\tconst strokeWidth = Math.min(barWidth, 6);\n\n\tconst bars = plotData\n\t\t.filter(d => isDefined(yAccessor(d).close))\n\t\t.map(d => {\n\t\t\tconst ohlc = yAccessor(d),\n\t\t\t\tx = Math.round(xScale(xAccessor(d))),\n\t\t\t\ty1 = yScale(ohlc.high),\n\t\t\t\ty2 = yScale(ohlc.low),\n\t\t\t\topenX1 = x - barWidth,\n\t\t\t\topenX2 = x + strokeWidth / 2,\n\t\t\t\topenY = yScale(ohlc.open),\n\t\t\t\tcloseX1 = x - strokeWidth / 2,\n\t\t\t\tcloseX2 = x + barWidth,\n\t\t\t\tcloseY = yScale(ohlc.close),\n\t\t\t\tclassName = classNameFunc(d),\n\t\t\t\tstroke = strokeFunc(d);\n\n\t\t\treturn { x, y1, y2, openX1, openX2, openY, closeX1, closeX2, closeY, stroke, className };\n\t\t});\n\treturn { barWidth, strokeWidth, bars };\n}\n\nexport default OHLCSeries;\n"]}},"error":null,"hash":"08c4d0061913864b179dfc2f48e27823","cacheData":{"env":{}}}