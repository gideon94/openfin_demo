{"id":"../node_modules/react-stockcharts/lib/axes/AxisZoomCapture.js","dependencies":[{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/axes/AxisZoomCapture.js.map","includedInParent":true,"mtime":1536032203000},{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/package.json","includedInParent":true,"mtime":1602365273866},{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/public/.babelrc","includedInParent":true,"mtime":1602365273866},{"name":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/package.json","includedInParent":true,"mtime":1602365360568},{"name":"react","loc":{"line":9,"column":21},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/axes/AxisZoomCapture.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react/react.js"},{"name":"prop-types","loc":{"line":13,"column":25},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/axes/AxisZoomCapture.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/prop-types/index.js"},{"name":"d3-selection","loc":{"line":17,"column":27},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/axes/AxisZoomCapture.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/d3-selection/src/index.js"},{"name":"d3-array","loc":{"line":19,"column":23},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/axes/AxisZoomCapture.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/d3-array/src/index.js"},{"name":"../utils","loc":{"line":21,"column":21},"parent":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/axes/AxisZoomCapture.js","resolved":"/home/hemanth/Desktop/Itarle/OpenFinWithReactReduxParcel/node_modules/react-stockcharts/lib/utils/index.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _d3Selection = require(\"d3-selection\");\n\nvar _d3Array = require(\"d3-array\");\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar AxisZoomCapture = function (_Component) {\n\t_inherits(AxisZoomCapture, _Component);\n\n\tfunction AxisZoomCapture(props) {\n\t\t_classCallCheck(this, AxisZoomCapture);\n\n\t\tvar _this = _possibleConstructorReturn(this, (AxisZoomCapture.__proto__ || Object.getPrototypeOf(AxisZoomCapture)).call(this, props));\n\n\t\t_this.handleDragStartMouse = _this.handleDragStartMouse.bind(_this);\n\t\t_this.handleDragStartTouch = _this.handleDragStartTouch.bind(_this);\n\t\t_this.handleDrag = _this.handleDrag.bind(_this);\n\t\t_this.handleDragEnd = _this.handleDragEnd.bind(_this);\n\t\t_this.handleRightClick = _this.handleRightClick.bind(_this);\n\t\t_this.saveNode = _this.saveNode.bind(_this);\n\t\t_this.state = {\n\t\t\tstartPosition: null\n\t\t};\n\t\treturn _this;\n\t}\n\n\t_createClass(AxisZoomCapture, [{\n\t\tkey: \"saveNode\",\n\t\tvalue: function saveNode(node) {\n\t\t\tthis.node = node;\n\t\t}\n\t}, {\n\t\tkey: \"handleRightClick\",\n\t\tvalue: function handleRightClick(e) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\tvar onContextMenu = this.props.onContextMenu;\n\n\n\t\t\tvar mouseXY = (0, _utils.mousePosition)(e, this.node.getBoundingClientRect());\n\n\t\t\t(0, _d3Selection.select)((0, _utils.d3Window)(this.node)).on(_utils.MOUSEMOVE, null).on(_utils.MOUSEUP, null);\n\t\t\tthis.setState({\n\t\t\t\tstartPosition: null\n\t\t\t});\n\n\t\t\tonContextMenu(mouseXY, e);\n\n\t\t\tthis.contextMenuClicked = true;\n\t\t}\n\t}, {\n\t\tkey: \"handleDragStartMouse\",\n\t\tvalue: function handleDragStartMouse(e) {\n\t\t\tthis.mouseInteraction = true;\n\n\t\t\tvar _props = this.props,\n\t\t\t    getScale = _props.getScale,\n\t\t\t    getMoreProps = _props.getMoreProps;\n\n\t\t\tvar startScale = getScale(getMoreProps());\n\t\t\tthis.dragHappened = false;\n\n\t\t\tif (startScale.invert) {\n\t\t\t\t(0, _d3Selection.select)((0, _utils.d3Window)(this.node)).on(_utils.MOUSEMOVE, this.handleDrag, false).on(_utils.MOUSEUP, this.handleDragEnd, false);\n\n\t\t\t\tvar startXY = (0, _utils.mousePosition)(e);\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tstartPosition: {\n\t\t\t\t\t\tstartXY: startXY,\n\t\t\t\t\t\tstartScale: startScale\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\te.preventDefault();\n\t\t}\n\t}, {\n\t\tkey: \"handleDragStartTouch\",\n\t\tvalue: function handleDragStartTouch(e) {\n\t\t\tthis.mouseInteraction = false;\n\n\t\t\tvar _props2 = this.props,\n\t\t\t    getScale = _props2.getScale,\n\t\t\t    getMoreProps = _props2.getMoreProps;\n\n\t\t\tvar startScale = getScale(getMoreProps());\n\t\t\tthis.dragHappened = false;\n\n\t\t\tif (e.touches.length === 1 && startScale.invert) {\n\t\t\t\t(0, _d3Selection.select)((0, _utils.d3Window)(this.node)).on(_utils.TOUCHMOVE, this.handleDrag).on(_utils.TOUCHEND, this.handleDragEnd);\n\n\t\t\t\tvar startXY = (0, _utils.touchPosition)((0, _utils.getTouchProps)(e.touches[0]), e);\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tstartPosition: {\n\t\t\t\t\t\tstartXY: startXY,\n\t\t\t\t\t\tstartScale: startScale\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: \"handleDrag\",\n\t\tvalue: function handleDrag() {\n\t\t\tvar startPosition = this.state.startPosition;\n\t\t\tvar _props3 = this.props,\n\t\t\t    getMouseDelta = _props3.getMouseDelta,\n\t\t\t    inverted = _props3.inverted;\n\n\n\t\t\tthis.dragHappened = true;\n\t\t\tif ((0, _utils.isDefined)(startPosition)) {\n\t\t\t\tvar startScale = startPosition.startScale;\n\t\t\t\tvar startXY = startPosition.startXY;\n\n\n\t\t\t\tvar mouseXY = this.mouseInteraction ? (0, _d3Selection.mouse)(this.node) : (0, _d3Selection.touches)(this.node)[0];\n\n\t\t\t\tvar diff = getMouseDelta(startXY, mouseXY);\n\n\t\t\t\tvar center = (0, _d3Array.mean)(startScale.range());\n\n\t\t\t\tvar tempRange = startScale.range().map(function (d) {\n\t\t\t\t\treturn inverted ? d - (0, _utils.sign)(d - center) * diff : d + (0, _utils.sign)(d - center) * diff;\n\t\t\t\t});\n\n\t\t\t\tvar newDomain = tempRange.map(startScale.invert);\n\n\t\t\t\tif ((0, _utils.sign)((0, _utils.last)(startScale.range()) - (0, _utils.first)(startScale.range())) === (0, _utils.sign)((0, _utils.last)(tempRange) - (0, _utils.first)(tempRange))) {\n\t\t\t\t\tvar axisZoomCallback = this.props.axisZoomCallback;\n\t\t\t\t\t// console.log(startXScale.domain(), newXDomain)\n\n\t\t\t\t\taxisZoomCallback(newDomain);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: \"handleDragEnd\",\n\t\tvalue: function handleDragEnd() {\n\t\t\tvar _this2 = this;\n\n\t\t\tif (!this.dragHappened) {\n\t\t\t\tif (this.clicked) {\n\t\t\t\t\tvar e = _d3Selection.event;\n\t\t\t\t\tvar mouseXY = this.mouseInteraction ? (0, _d3Selection.mouse)(this.node) : (0, _d3Selection.touches)(this.node)[0];\n\t\t\t\t\tvar onDoubleClick = this.props.onDoubleClick;\n\n\n\t\t\t\t\tonDoubleClick(mouseXY, e);\n\t\t\t\t} else {\n\t\t\t\t\tthis.clicked = true;\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t_this2.clicked = false;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t(0, _d3Selection.select)((0, _utils.d3Window)(this.node)).on(_utils.MOUSEMOVE, null).on(_utils.MOUSEUP, null).on(_utils.TOUCHMOVE, null).on(_utils.TOUCHEND, null);\n\n\t\t\tthis.setState({\n\t\t\t\tstartPosition: null\n\t\t\t});\n\t\t}\n\t}, {\n\t\tkey: \"render\",\n\t\tvalue: function render() {\n\t\t\tvar _props4 = this.props,\n\t\t\t    bg = _props4.bg,\n\t\t\t    className = _props4.className,\n\t\t\t    zoomCursorClassName = _props4.zoomCursorClassName;\n\n\n\t\t\tvar cursor = (0, _utils.isDefined)(this.state.startPosition) ? zoomCursorClassName : \"react-stockcharts-default-cursor\";\n\n\t\t\treturn _react2.default.createElement(\"rect\", {\n\t\t\t\tclassName: \"react-stockcharts-enable-interaction \" + cursor + \" \" + className,\n\t\t\t\tref: this.saveNode,\n\t\t\t\tx: bg.x, y: bg.y, opacity: 0, height: bg.h, width: bg.w,\n\t\t\t\tonContextMenu: this.handleRightClick,\n\t\t\t\tonMouseDown: this.handleDragStartMouse,\n\t\t\t\tonTouchStart: this.handleDragStartTouch\n\t\t\t});\n\t\t}\n\t}]);\n\n\treturn AxisZoomCapture;\n}(_react.Component);\n\nAxisZoomCapture.propTypes = {\n\tinnerTickSize: _propTypes2.default.number,\n\touterTickSize: _propTypes2.default.number,\n\ttickFormat: _propTypes2.default.func,\n\ttickPadding: _propTypes2.default.number,\n\ttickSize: _propTypes2.default.number,\n\tticks: _propTypes2.default.number,\n\ttickValues: _propTypes2.default.array,\n\tshowDomain: _propTypes2.default.bool,\n\tshowTicks: _propTypes2.default.bool,\n\tclassName: _propTypes2.default.string,\n\taxisZoomCallback: _propTypes2.default.func,\n\tinverted: _propTypes2.default.bool,\n\tbg: _propTypes2.default.object.isRequired,\n\tzoomCursorClassName: _propTypes2.default.string.isRequired,\n\tgetMoreProps: _propTypes2.default.func.isRequired,\n\tgetScale: _propTypes2.default.func.isRequired,\n\tgetMouseDelta: _propTypes2.default.func.isRequired,\n\tonDoubleClick: _propTypes2.default.func.isRequired,\n\tonContextMenu: _propTypes2.default.func.isRequired\n};\n\nAxisZoomCapture.defaultProps = {\n\tonDoubleClick: _utils.noop,\n\tonContextMenu: _utils.noop,\n\tinverted: true\n};\n\nexports.default = AxisZoomCapture;\n"},"sourceMaps":{"js":{"version":3,"sources":["../../../src/lib/axes/AxisZoomCapture.js"],"names":["AxisZoomCapture","props","handleDragStartMouse","bind","handleDragStartTouch","handleDrag","handleDragEnd","handleRightClick","saveNode","state","startPosition","node","e","stopPropagation","preventDefault","onContextMenu","mouseXY","getBoundingClientRect","on","setState","contextMenuClicked","mouseInteraction","getScale","getMoreProps","startScale","dragHappened","invert","startXY","touches","length","getMouseDelta","inverted","diff","center","range","tempRange","map","d","newDomain","axisZoomCallback","clicked","onDoubleClick","setTimeout","bg","className","zoomCursorClassName","cursor","x","y","h","w","propTypes","innerTickSize","number","outerTickSize","tickFormat","func","tickPadding","tickSize","ticks","tickValues","array","showDomain","bool","showTicks","string","object","isRequired","defaultProps"],"mappings":"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","file":"AxisZoomCapture.js","sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { select, event as d3Event, mouse, touches } from \"d3-selection\";\nimport { mean } from \"d3-array\";\n\nimport {\n\tfirst,\n\tlast,\n\tisDefined,\n\tnoop,\n\tmousePosition,\n\td3Window,\n\tMOUSEMOVE,\n\tMOUSEUP,\n\tTOUCHMOVE,\n\tTOUCHEND,\n\ttouchPosition,\n\tgetTouchProps,\n\tsign,\n} from \"../utils\";\n\nclass AxisZoomCapture extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleDragStartMouse = this.handleDragStartMouse.bind(this);\n\t\tthis.handleDragStartTouch = this.handleDragStartTouch.bind(this);\n\t\tthis.handleDrag = this.handleDrag.bind(this);\n\t\tthis.handleDragEnd = this.handleDragEnd.bind(this);\n\t\tthis.handleRightClick = this.handleRightClick.bind(this);\n\t\tthis.saveNode = this.saveNode.bind(this);\n\t\tthis.state = {\n\t\t\tstartPosition: null\n\t\t};\n\t}\n\tsaveNode(node) {\n\t\tthis.node = node;\n\t}\n\thandleRightClick(e) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tconst { onContextMenu } = this.props;\n\n\t\tconst mouseXY = mousePosition(e, this.node.getBoundingClientRect());\n\n\t\tselect(d3Window(this.node))\n\t\t\t.on(MOUSEMOVE, null)\n\t\t\t.on(MOUSEUP, null);\n\t\tthis.setState({\n\t\t\tstartPosition: null,\n\t\t});\n\n\t\tonContextMenu(mouseXY, e);\n\n\t\tthis.contextMenuClicked = true;\n\t}\n\thandleDragStartMouse(e) {\n\t\tthis.mouseInteraction = true;\n\n\t\tconst { getScale, getMoreProps } = this.props;\n\t\tconst startScale = getScale(getMoreProps());\n\t\tthis.dragHappened = false;\n\n\t\tif (startScale.invert) {\n\t\t\tselect(d3Window(this.node))\n\t\t\t\t.on(MOUSEMOVE, this.handleDrag, false)\n\t\t\t\t.on(MOUSEUP, this.handleDragEnd, false);\n\n\t\t\tconst startXY = mousePosition(e);\n\n\t\t\tthis.setState({\n\t\t\t\tstartPosition: {\n\t\t\t\t\tstartXY,\n\t\t\t\t\tstartScale,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\te.preventDefault();\n\t}\n\thandleDragStartTouch(e) {\n\t\tthis.mouseInteraction = false;\n\n\t\tconst { getScale, getMoreProps } = this.props;\n\t\tconst startScale = getScale(getMoreProps());\n\t\tthis.dragHappened = false;\n\n\t\tif (e.touches.length === 1 && startScale.invert) {\n\t\t\tselect(d3Window(this.node))\n\t\t\t\t.on(TOUCHMOVE, this.handleDrag)\n\t\t\t\t.on(TOUCHEND, this.handleDragEnd);\n\n\t\t\tconst startXY = touchPosition(getTouchProps(e.touches[0]), e);\n\n\t\t\tthis.setState({\n\t\t\t\tstartPosition: {\n\t\t\t\t\tstartXY,\n\t\t\t\t\tstartScale,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\thandleDrag() {\n\t\tconst { startPosition } = this.state;\n\t\tconst { getMouseDelta, inverted } = this.props;\n\n\t\tthis.dragHappened = true;\n\t\tif (isDefined(startPosition)) {\n\t\t\tconst { startScale } = startPosition;\n\t\t\tconst { startXY } = startPosition;\n\n\t\t\tconst mouseXY = this.mouseInteraction\n\t\t\t\t? mouse(this.node)\n\t\t\t\t: touches(this.node)[0];\n\n\t\t\tconst diff = getMouseDelta(startXY, mouseXY);\n\n\t\t\tconst center = mean(startScale.range());\n\n\t\t\tconst tempRange = startScale.range()\n\t\t\t\t.map(d => inverted ? d - sign(d - center) * diff : d + sign(d - center) * diff);\n\n\t\t\tconst newDomain = tempRange.map(startScale.invert);\n\n\t\t\tif (sign(last(startScale.range()) - first(startScale.range())) === sign(last(tempRange) - first(tempRange))) {\n\n\t\t\t\tconst { axisZoomCallback } = this.props;\n\t\t\t\t// console.log(startXScale.domain(), newXDomain)\n\t\t\t\taxisZoomCallback(newDomain);\n\t\t\t}\n\t\t}\n\t}\n\thandleDragEnd() {\n\n\t\tif (!this.dragHappened) {\n\t\t\tif (this.clicked) {\n\t\t\t\tconst e = d3Event;\n\t\t\t\tconst mouseXY = this.mouseInteraction\n\t\t\t\t\t? mouse(this.node)\n\t\t\t\t\t: touches(this.node)[0];\n\t\t\t\tconst { onDoubleClick } = this.props;\n\n\t\t\t\tonDoubleClick(mouseXY, e);\n\t\t\t} else {\n\t\t\t\tthis.clicked = true;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.clicked = false;\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t}\n\n\t\tselect(d3Window(this.node))\n\t\t\t.on(MOUSEMOVE, null)\n\t\t\t.on(MOUSEUP, null)\n\t\t\t.on(TOUCHMOVE, null)\n\t\t\t.on(TOUCHEND, null);\n\n\t\tthis.setState({\n\t\t\tstartPosition: null,\n\t\t});\n\t}\n\trender() {\n\t\tconst { bg, className, zoomCursorClassName } = this.props;\n\n\t\tconst cursor = isDefined(this.state.startPosition)\n\t\t\t? zoomCursorClassName\n\t\t\t: \"react-stockcharts-default-cursor\";\n\n\t\treturn <rect\n\t\t\tclassName={`react-stockcharts-enable-interaction ${cursor} ${className}`}\n\t\t\tref={this.saveNode}\n\t\t\tx={bg.x} y={bg.y} opacity={0} height={bg.h} width={bg.w}\n\t\t\tonContextMenu={this.handleRightClick}\n\t\t\tonMouseDown={this.handleDragStartMouse}\n\t\t\tonTouchStart={this.handleDragStartTouch}\n\t\t/>;\n\t}\n}\n\nAxisZoomCapture.propTypes = {\n\tinnerTickSize: PropTypes.number,\n\touterTickSize: PropTypes.number,\n\ttickFormat: PropTypes.func,\n\ttickPadding: PropTypes.number,\n\ttickSize: PropTypes.number,\n\tticks: PropTypes.number,\n\ttickValues: PropTypes.array,\n\tshowDomain: PropTypes.bool,\n\tshowTicks: PropTypes.bool,\n\tclassName: PropTypes.string,\n\taxisZoomCallback: PropTypes.func,\n\tinverted: PropTypes.bool,\n\tbg: PropTypes.object.isRequired,\n\tzoomCursorClassName: PropTypes.string.isRequired,\n\tgetMoreProps: PropTypes.func.isRequired,\n\tgetScale: PropTypes.func.isRequired,\n\tgetMouseDelta: PropTypes.func.isRequired,\n\tonDoubleClick: PropTypes.func.isRequired,\n\tonContextMenu: PropTypes.func.isRequired,\n};\n\nAxisZoomCapture.defaultProps = {\n\tonDoubleClick: noop,\n\tonContextMenu: noop,\n\tinverted: true\n};\n\nexport default AxisZoomCapture;\n"]}},"error":null,"hash":"555d04f41d743a988b23684a3345948e","cacheData":{"env":{}}}